
## 庄哲伟

### 个人信息

目前就职于小红书基础技术部，高可用平台组

- 求职意向：后端工程师
- 工作年限：6年
- base：上海
- 出生年月：1992.01
- 联系方式
	- 手机: 17621156403
	- Email: mamori23@dingtalk.com

### 个人经历
#### 教育经历

<div style="display:flex">
<p style="width:20%">中国科学技术⼤学</p>
<p style="width:20%">2014.09 - 2017.06</p> 
<p style="width:20%">软件⼯程</p>
<p style="width:10%">硕⼠</p>
</div>

<div style="display:flex">
<p style="width:20%">哈尔滨⼯业⼤学</p>
<p style="width:20%">2010.09 - 2014.06</p> 
<p style="width:20%">电⼦信息⼯程</p>
<p style="width:10%">本科</p>
<!-- <p align="right">2010.09 - 2014.06</p>  -->
</div>

#### 工作经历
<div style="display:flex">
<p style="width:20%"><b>小红书</b></p>
<p style="width:20%">2020.08 - 2023.05</p>
<p style="width:20%">基础技术部</p>
<p style="width:30%">云原生开发工程师</p>
</div>

就职于小红书基础技术部的高可用平台组，我们团队工作核心内容是围绕**线上稳定性**相关的 PaaS 平台建设。


- 故障预防
	- 小红书稳定性治理专项的核心项目，支撑公司所有变更场景的**灰度验证能力**落地，代码变更、配置变更100%、基架变更50%以上已接入变更管控
	- 负责小红书变更风控项目 riskfree 的持续迭代，提供变更灰度阶段的**风险检测和故障预防能力**，建设智能化，自动化，长效化的技术风险防控运营机制
	- 与可观测团队共建，引入多个观测系统，包括 Prometheus、Cat 等，落地多维度的风险检测能力
	- 为小红书典型封网场景提供统一的封网能力

- 发布系统
	- ⼩红书云原生发布系统 Ones 的设计和开发工作，支撑公司混合云场景下的微服务持续交付能力建设。管理小红书全站9k+个线上服务的工作负载，日均发布量35k+，WAU达到1500
	- 做为 k8s **变更基架**，承载搜广推等业务的 IDP 平台的变更能力，向上提供发布、服务元信息、工作负载查询、运维、容量管理等能力
	- **稳定性与成本管控入口**，向下承接 DevOps 运维与 k8s 资源管理，容量变更审计等能力
	- 落地小红书核心场景 S0 服务的变更标准，包括变更参数优化和发布流程规范化
	- 与可观测团队合作，提供发布过程的实时监控和发布诊断能力
- 故障止损
	- 参与小红书故障止损能力的建设，负责预案执行平台 redbutton 的开发与维护。辅助 SRE 团队日常容灾演练，故障发生时执行止损预案，具备接入层的**南北向**切流能力，核心场景**东西向切流、限流**，**实验降级**等止损能力。
	- 参与线上服务稳定性加固相关的规范制定和切流能力验证
- Metric 监控 故障发现定位
	- 设计与开发小红书指标报警平台 reddog，提供全公司 Prometheus 监控指标的**即时查询**门户和**报警的检测和配置管理能力**，线上报警规则数10k+，P0报警1k+，日均产生报警事件5000+
	- 报警数据运营，核心场景P0阈值告警准确率95%+


<div style="display:flex">
<p style="width:20%"><b>趣头条</b></p>
<p style="width:30%">2019.04 - 2020.07</p>
<p style="width:20%">算法工程部</p>
<p style="width:30%">Golang开发工程师   
</div>

- 开发在线推理服务worker、ps管理平台DataAI，提供镜像管理、服务部署、离线任务调度等功能。  
- 参数服务器ps的开发和维护工作


<div style="display:flex">
<p style="width:20%"><b>bilibili</b></p>
<p style="width:30%;">2017.12 - 2019.04</p>
<p style="width:20%">主站技术部</p>
<p style="width:30%">Golang开发工程师</p>
</div>

- 负责B站分布式小文件储存系统 BFS 的开发、运维，并维护图片业务  
- 主站社区内容的举报和申诉工单系统设计与开发


<div style="display:flex">
<p style="width:20%"><b>斐讯通信</b></p>
<p style="width:30%">2017.04 - 2017.11</p>
<p style="width:20%">应用运营部</p>
<p style="width:30%">Devops工程师</p>
</div>

- 公司商城主页的后端开发和维护工作

## 项目经历

### 变更风控平台 riskfree
###### 2022.09 - 2023.05
过去一年小红书85%以上的生产事故由主动变更导致。riskfree 是小红书稳定性治理专项的核心项目，面向小红书所有变更系统，提供变更灰度阶段的故障预防能力，建设符合小红书业务场景的技术风险防控体系。
在变更期间从多个观测源 (prometheus, cat，链路自动化测试平台等) 持续收集监控数据, 日志数据, 报警数据进行数据分析, 自动化的判断本次变更是否有异常，减轻人的盯盘压力。
- 对接公司 11 个变更系统的灰度场景，支持 6 个观测系统；覆盖公司100%核心业务场景与S0服务的变更；维护红线规则 1k+ 个，每周触发检测 6k+ 次，总打扰率 1.5%，故障总召回率 80%
- 初期考虑降低接入成本，采用弱管控方案设计，变更系统通过 SDK 的方式对接
- 管控能力建设
	- 支持的灰度场景：单实例 canary，机房内分批次灰度，实验变更，故障注入（单 POD 或部署单元），CDN 变更（回源观测）等
	- 维护公司高峰期封网策略，支持自动化封网和手动封网，解决了统一封网的问题
- 治理成果举例
	- 接入故障预防后，推荐实验引起的故障数降低到原先的3%
	- 参与制定小红书变更系统灰度成熟度标准，明确度量指标，推动变更系统的灰度能力提升，变更系统平均成熟度分数从 5 升到 8.5。
- 协助 AIOps 同学落地变更指标的智能阈值检测，减少人工配置成本，提升变更拦截的指标准确度
- 协助前端同学开发产品界面

### ONES 发布系统
###### 2021.01 - 2023.05

小红书混合云场景下支撑线上服务的持续交付能力的 PaaS 平台。面向全公司1w+个服务提供工作负载变更和运维能力，周平均3.5w+次发布，其中生产环境1w+次，总成功率85%。
- 基于 kubernetes crd 实现发布流水线的编排和生命周期管理
	- ones-crd 模块提供发布**流水线的自定义编排能力**，制定小红书跨云多活场景的发布流程规范
	- 线上发布具备多种灰度验证能力，支持**机房内分批次灰度**，canary 灰度，故障注入，机房间强制卡点，流量爬坡等，通过插件化调用，具备可扩展性
	- 通过 helm 实现工作负载的制品渲染，产品层提供 manifest 可视化配置和参数校验能力
	- 对发布过程的核心指标，成功率 耗时等进行实时监控，实现发布诊断能力
	- 流水线具备**发布后可回滚和 hotfix** 的能力

- 通过 informer 机制实现监听 50+个k8s集群的工作负载和 POD 等资源的变更事件
	- ones-watch 模块提供资源的查询能力，向上游平台暴露查询入口
	- 面向发布过程的实时监控和发布诊断场景提供查询支撑
	- 解决旧发布系统的查询工作负载的卡顿问题
- 开发 ones-api 模块，向前端产品层提供后端接口
	- 面向外部 IDP 平台暴露工作负载的变更和即时查询能力
	- 通过 gitops 方式实现线上服务的 manifest **配置管理**，向外暴露配置表单化能力
	- 基于 RBAC 实现发版、配置变更等操作的**权限管理**和审计能力
	- 与接入层团队共建，在 sit、beta 环境支持基于泛域名和泳道的个人页开发环境，使得开发者能够在云端进行应用程序的开发和调试。
	- 落地小红书 S0 服务变更规范，实现对 S0 服务变更的统一管理，包括变更参数的优化和前置校验，变更流程的规范化等
		- updateStrategy 参数优化，POD 打散，cpu-brust，流量爬坡，超卖禁用，健康检查，绑核等
		- 切换 cloneset，使用原地发布，切换分批次流水线
- 通过 ones-connect 模块提供对线上容器资源的运维能力
	- 开发 ones-connect 模块，实现运维能力白屏化。提供工作负载和 POD 如滚动重启、重建、shell、标准输出、文件下载等运维能力。
	- 封装 OpenKruise 提供的增强运维能力，如 ContainerRecreateRequest、ResourceDistribution等，实现指定容器重启、configmap 跨 namespace 下发等高阶运维能力。
	- 对接 onecloud 成本管控平台的 finops 相关能力，实现扩缩容的资源成本管控和计费能力，协助公司资源利用率优化目标的达成，目前整体 CPU 利用率 30%

### redbutton 预案平台
###### 2022.08 - 2023.03
提供小红书线上故障的止损能力，目标是降低系统故障的 **MTTR** 指标，提升系统可靠性
- 使用场景 
  - 容灾演练时，服务单元 AZ 间的切流开关
  - 制定服务级别故障的容灾预案，故障发生时执行预案，实现将应用服务流量快速切换至其他区域；
  - 服务稳定性加固效果验证 
    - 多活部署架构下，当某个 AZ 出现整体可用性问题，能通过手动切流去做单元流量调度
  - 服务单元化治理，包括跨单元访问识别、强弱依赖验证等
- 南北向切流（机房接入层） 
  - 实现对多个网关组件切流，lb kong rgw 业务网关等，通常用于兜底机房故障
    - 根据机房间流量基线制定切流策略，并支持快速回切到基线
    - 设计和开发**南北向决策器**，根据相关的 Metric 指标计算切流策略，自动产生预案执行单
  - 核心机房间权重调整，支持**熔断单一机房流量**
  - 配合接入层团队进行网关架构改造
  - 配合混沌团队进行日常演练工作
- 东西向切流（服务单元） 
  - 通过对注册中心的权重调整，实现服务单元的切流
  - 支持调整**目标服务在单一机房**的权重
  - 兼容新旧服务名映射
  - 通过步长切流的方式，分批次进行切流，尽可能降低切流导致的业务损失
- 单体服务限流
  - 下发特定配置到 apollo 注册中心，red-sentinel 中间件自动感知
- 支持对实验平台进行实验降级
- 基本的演练编排能力，支持多预案串行执行，具备批次间观测能力
- 与风险平台联动，实现预案的生命周期管理，定期执行演练

### reddog 报警中心
###### 2020.08 - 2022.09

基于 Prometheus Metric 的报警配置平台，为公司提供监控指标的报警能力，报警规则总数 21k，日均产生报警事件5000+，P0 报警 5min 响应率 99%
- 基于 VictoriaMetric vmalert 组件进行二次开发
- 开发和维护 reddog-engine **报警引擎**模块，通过定时 poll 方式执行报警规则的实时检测，生成报警事件。
	- 根据存储架构，报警引擎按 bu 进行拆分，支持热插拔，具备报警静默、认领等能力，上线至今无告警风暴 全局不可用等问题
	- 基于企业微信进行报警通知，具备微信服务号、机器人、电话、短信、邮件等通知渠道
	- 聚合报警事件上报至xray平台，支持第三方平台主动 push 报警事件，兼容存量的 Grafana 报警配置
- 开发 reddog-proxy 模块，提供产品层后端服务接口，提供**报警规则的配置**提交和 **Metric 即时查询**能力
	- 配置可视化，提供配置预览和模拟报警的能力
	- 面向通用场景提供抽象的报警模版，简化报警配置，减少研发同学和编写 PromQL 的心智负担，提高易用性和告警覆盖率，实现一键配置中间件核心报警
	- 提供 PromQL 查询能力，优化查询体验，具备鉴权 慢查询过滤，查询缓存等能力，分担 Grafana 的查询压力
- 协助 xray 可观测平台数据分析师，实现部分核心告警的故障自愈能力，与事件变更平台的打通，提升故障的发现和定位效率
- 具备观测系统的可扩展性，可通过多种非 Prometheus 数据源产生报警，如 MySQL（TiDB），ElasticSearch 查询表达式的报警能力
- 参与制定小红书容器与中间件核心指标的报警规范，S0 S1服务实现核心报警覆盖率 100%


### 个人技能
- 熟悉 Golang 语言
- 熟悉基于 Kubernetes 的云原生持续交付过程，了解 DevOps 开发模式
- 掌握 MySQL，Prometheus 中间件的使用
- 了解 VictoriaMetric 分布式时序数据库
- 对分布式系统架构有一定了解，具有项目架构设计能力

### 开源项目

#### Crane
Crane 是一个基于 FinOps 的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。
小红书为了实现降本与核心服务稳定性，与开源社区共建Crane项目，并在生产环境落地 Crane 的以下能力：
- QoS 混部增强（qos ensured），当较高优先级的 Pod 受到资源竞争的影响时，Disable Schedule、Throttle 以及 Evict 将应用于低优先级的 Pod，以保证节点整体的稳定。
- 通过 cpuset 增强旁路能力，使用的 cpuset 策略为 share 模式，提升绑核后的 CPU 使用率，只针对业务容器开启绑核
- Dynamic Scheduler，使用 crane scheduler 代替原生调度器，根据资源负载动态调度 POD，实现资源的最优利用，减少集群的资源碎片，目前小红书整体资源利用率达到 30%。
- 基于 Effective HPA 实现在离线混部，支持更丰富的弹性触发策略（预测，观测，周期），让弹性更加高效，并保障了服务的质量。

2022.03 修复Crane agent QOS混部模块一些指标度量的bug

#### TiDB
2019.09 成为 TiDB, TiKV contributor，贡献了一些 PR，包括：
- 实现部分 TiDB SQL 函数的计算下推，提升 SQL 执行效率



## 获奖
2021.12 小红书技术部双月最佳效率提升奖 Ones2.0  
2019.11 参与 TiDB Performance Challenge 性能挑战赛优秀奖



